<head>
	<title>pigeon</title>
	
	<link rel="stylesheet" href="css/style.css" />
</head>

<body>
	<script type="text/x-handlebars">
		<div class="header">
			<h1>.pigeon</h1>
		</div>
		
		<div class="main">
			

			{{#with Pigeon.global}}
            
                {{#view Pigeon.GlobalView contentBinding="this"}}
                
                    <button {{action "reset" target="view"}}>Reset All States</button>
                
                    <div class="row">
                        <h3>Global State</h3>
                
                        <div class="column">
                            {{view Pigeon.EditorView valueBinding="body"}}
                            
                            {{#if body}}
                                {{#if error}}
                                    <div class="json">{{error}}</div>
                                {{else}}    
                                    <div class="json">{{json state}}</div>
                                {{/if}}
                            {{/if}}
                        </div>
                        
                        <div class="column narrow">
                            <h4>Options</h4>
                            
                            {{#each options}}
                                {{#view Pigeon.OptionView class="option" contentBinding="this"}}
                                    <h3 class="name">options.{{input value=key placeholder="option"}} <button {{action "remove" target="view"}}>x</button></h3>
                                    
                                    {{#each values}}
                                        {{#view Pigeon.ValueView class="value" contentBinding="this"}}
                                        
                                            {{view Ember.RadioButton class="inline" nameBinding="option.id" selectionBinding="selected"}}
                                            {{view Pigeon.EditorView valueBinding="content" dynamic=true class="inline"}}
                                        {{/view}}
                                    {{/each}}
                                {{/view}}
                            {{/each}}
                        </div>
                    </div>
                
                    {{#each apis}}
                        {{#view Pigeon.ApiView contentBinding="this" class="api"}}
                            <div class="column">
                                <h3>
                                    Endpoint:
                                    {{input value=method   placeholder="ALL" class="tiny"}}
                                    {{input value=endpoint placeholder="endpoint" class="large"}}
                                    <button {{action "remove" target="view"}}>x</button>
                                </h3>
                                
                                <h4>Body</h4>
                                
                                {{view Pigeon.EditorView valueBinding="body"}}
                                
                                
                                
                                {{#view Pigeon.StateView contentBinding="this" class="state"}}
                                           
                                    {{#if body}}
                                        <h4>State</h4>
                                    
                                        {{#if error}}
                                            <div class="json">{{error}}</div>
                                        {{else}}    
                                            <div class="json">{{json state}}</div>
                                        {{/if}}
                                        
                                        <button {{action "reset" target="view"}}>Reset State</button>
                                    {{/if}}
                                {{/view}}
                            </div>
                            
                            <div class="column narrow">
                                <h4>Options</h4>
                                
                                {{#each options}}
                                    {{#view Pigeon.OptionView class="option" contentBinding="this"}}
                                        <h3 class="name">options.{{input value=key placeholder="option"}} <button {{action "remove" target="view"}}>x</button></h3>
                                        
                                        {{#each values}}
                                            {{#view Pigeon.ValueView class="value" contentBinding="this"}}
                                            
                                                {{view Ember.RadioButton class="inline" nameBinding="option.id" selectionBinding="selected"}}
                                                {{view Pigeon.EditorView valueBinding="content" dynamic=true class="inline"}}
                                            {{/view}}
                                        {{/each}}
                                    {{/view}}
                                {{/each}}
                            </div>
                            
                            {{#view Pigeon.MiddleWareView contentBinding="this" class="column"}}
                                <h4>Middleware</h4>
                                {{view Pigeon.EditorView valueBinding="middleware"}}
                            {{/view}}
                        {{/view}}
        
                    {{/each}}
                {{/view}}
			{{/with}}
		</div>
	</script>
	
	<script type="text/x-handlebars" id="editor">
		<div {{bindAttr id="view.id" class=":editor view.dynamic:dynamic"}}></div>
	</script>

	<script src="js/lib/jquery-1.9.1.js"></script>
	<script src="js/lib/handlebars-1.0.0.js"></script>
	<script src="js/lib/ember-1.1.2.js"></script>
	<script src="js/lib/underscore.js"></script>
	<script src="/socket.io/socket.io.js"></script>
    <script src="js/lib/ace.js" charset="utf-8"></script>
	
	<script src="js/utils.js"></script>
	
	<script src="js/app.js"></script>
	<script src="js/model.js"></script>
	<script src="js/view.js"></script>
    <script src="js/data.js"></script>
</body>